<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Elenco - Novo Esquema</title>

    <!-- CSS global (menu) -->
    <link rel="stylesheet" href="global.css">

    <!-- CSS desta página -->
    <link rel="stylesheet" href="elenco.css">

    <!-- SimpleLightbox CSS -->
    <link href="https://cdn.jsdelivr.net/npm/simplelightbox@2.4.0/dist/simple-lightbox.min.css" rel="stylesheet">

    <link rel="shortcut icon" href="colocar a foto de favicon" type="image/x-icon">
</head>
<body>
    <header>
        <div class="header-content">
            <img src="escudo do time.jpg" class="escudo" alt="Escudo">
    
            <nav>
                <a href="index.html">Início</a>
                <a href="sobre.html">Sobre</a>
                <a href="elenco.html">Elenco</a>
                <a href="jogos.html">Jogos</a>
                <a href="contato.html">Contato</a>
            </nav>
        </div>
    </header>
    
    <div>
        <h1>Elenco</h1>
    </div>

    <!-- Formulário de Upload de Imagens -->
    <div id="upload-container" style="margin-top: 40px;">
        <h2>Faça o upload da sua foto para o time:</h2>
        <input type="file" id="uploadInput" accept="image/*">
        <button id="uploadButton">Enviar</button>
        <p id="status"></p> <!-- Status do upload -->
    </div>

    <!-- Galeria de Fotos -->
    <div id="gallery" class="galeria">
        <!-- Imagens dos jogadores vão aparecer aqui após o upload -->
    </div>

    <script src="https://cdn.jsdelivr.net/npm/simplelightbox@2.4.0/dist/simple-lightbox.min.js"></script>
    
    <script>
        // Inicializa o SimpleLightbox com opções de responsividade
        var lightbox = new SimpleLightbox('.lightbox', {
            maxWidth: '90%',
            maxHeight: '90vh',
            closeText: 'X',
        });

        // -------------------------------
        // UPLOAD DE FOTOS PARA O CLOUDINARY
        // -------------------------------
        document.getElementById('uploadButton').addEventListener('click', function() {
            const fileInput = document.getElementById('uploadInput');
            const file = fileInput.files[0];

            if (!file) {
                alert("Por favor, selecione uma imagem para enviar.");
                return;
            }

            // Exibe uma mensagem enquanto a imagem está sendo carregada
            document.getElementById('status').textContent = "Enviando...";

            const formData = new FormData();
            formData.append('file', file);
            formData.append('upload_preset', 'upload_ne'); // O nome do preset que você criou

            // URL do Cloudinary (substitua 'SEU_CLOUD_NAME' pelo seu Cloud Name)
            const url = 'https://api.cloudinary.com/v1_1/SEU_CLOUD_NAME/image/upload';

            // Enviar imagem para o Cloudinary
            fetch(url, {
                method: 'POST',
                body: formData
            })
            .then(response => response.json())
            .then(data => {
                // Exibe o link da imagem enviada
                const imageUrl = data.secure_url;

                // Atualiza o status
                document.getElementById('status').textContent = "Upload concluído!";

                // Cria um elemento de imagem e a adiciona à galeria
                const img = document.createElement('img');
                img.src = imageUrl;  // Link da imagem retornado pelo Cloudinary
                img.alt = 'Imagem enviada';
                
                // Cria o contêiner para a nova imagem e a adiciona à galeria
                const newImageContainer = document.createElement('div');
                newImageContainer.classList.add('imagem-container');

                const newImageLink = document.createElement('a');
                newImageLink.href = imageUrl; // Para abrir em lightbox
                newImageLink.classList.add('lightbox');
                
                newImageLink.appendChild(img);
                newImageContainer.appendChild(newImageLink);

                const gallery = document.getElementById('gallery');
                gallery.appendChild(newImageContainer); // Adiciona a imagem à galeria
            })
            .catch(error => {
                console.error("Erro no upload:", error);
                document.getElementById('status').textContent = "Erro no upload. Tente novamente.";
            });
        });
    </script>

    <footer>
        &trade; Site criado pelo Cláudio para o time Novo Esquema F.C.
    </footer>
</body>
</html>
